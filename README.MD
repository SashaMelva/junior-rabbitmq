# Репозиторий - основа для создания приложения по работе с rabbitmq

## Задача 

Написать SPA приложение для рассчета нескольких чисел фиббоначи рекурсивным алгоритмом при помощи воркеров. 

[Официальный туториал от rabbitmq, прочтите материалы 1го и 2го урока](https://www.rabbitmq.com/tutorials/tutorial-one-php.html)

## Внешний вид

1. 3 поля в которые можно ввести число от 30 до 60. Число 1, Число 2, Число 3
2. Кнопка "Рассчитать", Кнопка активируется только тогда когда все числа заполнены и рассчет еще не запущен. Если рассчет запущен, деактивировать её.
3. Блок с результатами. В котором выводить посчитанное число фибонначи. Блок с результатами обновляется каждые 5 секунд при помощи Аякс.


## Схема работы:

На сервере должны быть запущены два воркера(файл worker.php) для рассчета числа Фибонначи соответствующим алгоритмом. Воркеры слушают очередь В реббит, считают и отправляют результаты.

```php
function fib(int $a): int 
{
    if ($a === 0) {
        return 0;
    }
    if ($a === 1) {
        return 1;
    }
    return fib($a - 1) + fib($a - 2);
}
```

При нажатии кнопки рассчитать выполняется Аякс запрос на сервер и задачи ставятся в очередь. **Одна задача = Одно число**.

### Подключение к реббиту

```php
require_once 'vendor/autoload.php';

use PhpAmqpLib\Connection\AMQPStreamConnection;
use PhpAmqpLib\Message\AMQPMessage;

$connection = new AMQPStreamConnection('jr-rabbitmq', 5672, 'guest', 'guest');
$channel = $connection->channel();
$channel->queue_declare('test', false, false, false, false);
```
